{"version":3,"sources":["../../../../src/lib/interactive/components/BackgroundHover.js"],"names":["BackgroundHover","props","saveNode","bind","renderSVG","drawOnCanvas","isHover","node","moreProps","helper","rect","mouseXY","x","y","width","height","ctx","globalCompositeOperation","fillStyle","beginPath","fillRect","setTransform","restore","e","cx","cy","onHover","onUnHover","fill","hovering","show","interactiveCursorClass","onDragStart","onDrag","onDragComplete","getMouseCanvas","Component","position","xScale","yScale","chartConfig","xValue","yValue","propTypes","PropTypes","func","isRequired","string","number","className","bool","strokeOpacity","fillOpacity","defaultProps","noop","onMove"],"mappings":"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","file":"BackgroundHover.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { getMouseCanvas } from \"../../GenericComponent\";\n\nimport { noop, hexToRGBA } from \"../../utils\";\n\nclass BackgroundHover extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.saveNode = this.saveNode.bind(this);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.isHover = this.isHover.bind(this);\n\t}\n\tsaveNode(node) {\n\t\tthis.node = node;\n\t}\n\tisHover(moreProps) {\n\t\tconst { rect } = helper(this.props, moreProps);\n\t\tconst {\n\t\t\tmouseXY: [x, y],\n\t\t} = moreProps;\n\n\t\tif (\n\t\t\tx >= rect.x &&\n            y >= rect.y &&\n            x <= rect.x + rect.width &&\n            y <= rect.y + rect.height\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst {  width, height } = this.props;\n\n\t\tconst { rect } = helper(this.props, moreProps);\n\n\t\tctx.globalCompositeOperation = \"destination-over\";\n\t\tctx.fillStyle = hexToRGBA(\"#74b9ff\", 0.3);\n\n\t\tctx.beginPath();\n\t\tctx.fillRect(rect.x, rect.y, width, height);\n\t\tctx.setTransform(1, 1, 1, 1, 1, 0);\n\n\t\tctx.beginPath();\n\t\tctx.restore();\n\t}\n\trenderSVG(moreProps, e) {\n\t\tconst { cx, cy, width, onHover, onUnHover, height, fill } = this.props;\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tfill=\"#e2e2e2\"\n\t\t\t\t\tx={cx}\n\t\t\t\t\ty={cy}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tonMouseMove={() => {\n\t\t\t\t\t\tonHover(\n\t\t\t\t\t\t\t{ ...moreProps, hovering: true, show: true },\n\t\t\t\t\t\t\te\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseEnter={() => {\n\t\t\t\t\t\tonHover(\n\t\t\t\t\t\t\t{ ...moreProps, hovering: true, show: true },\n\t\t\t\t\t\t\te\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseLeave={() => {\n\t\t\t\t\t\tonUnHover(moreProps, e);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</g>\n\t\t);\n\t}\n\trender() {\n\t\tconst { interactiveCursorClass } = this.props;\n\t\tconst { show } = this.props;\n\t\tconst { onDragStart, onDrag, onDragComplete } = this.props;\n\n\t\treturn show ? (\n\t\t\t<GenericChartComponent\n\t\t\t\tref={this.saveNode}\n\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\n\t\t\t\tselected\n\t\t\t\tisHover={this.isHover}\n\t\t\t\tonDragStart={onDragStart}\n\t\t\t\tonDrag={onDrag}\n\t\t\t\tonDragComplete={onDragComplete}\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tcanvasToDraw={getMouseCanvas}\n\t\t\t\tdrawOn={[\"pan\", \"mousemove\", \"drag\"]}\n\t\t\t/>\n\t\t) : null;\n\t}\n}\n\nfunction helper(props, moreProps) {\n\tconst { position, width, height } = props;\n\n\tconst {\n\t\txScale,\n\t\tchartConfig: { yScale },\n\t} = moreProps;\n\n\tconst [xValue, yValue] = position;\n\tconst x = xScale(xValue) - width / 2;\n\tconst y = yScale(yValue) - height / 2;\n\n\tconst rect = {\n\t\tx,\n\t\ty,\n\t\twidth,\n\t\theight,\n\t};\n\n\treturn {\n\t\tx,\n\t\ty,\n\t\trect,\n\t};\n}\n\nBackgroundHover.propTypes = {\n\tonDragStart: PropTypes.func.isRequired,\n\tonDrag: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n\tfill: PropTypes.string.isRequired,\n\n\tcx: PropTypes.number,\n\tcy: PropTypes.number,\n\n\tclassName: PropTypes.string.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tstrokeOpacity: PropTypes.number.isRequired,\n\tfillOpacity: PropTypes.number.isRequired,\n\tinteractiveCursorClass: PropTypes.string,\n};\n\nBackgroundHover.defaultProps = {\n\tclassName: \"react-stockcharts-interactive-line-edge\",\n\tonDragStart: noop,\n\tonDrag: noop,\n\tonDragComplete: noop,\n\tonMove: noop,\n\tshow: false,\n\tfillOpacity: 1,\n\tstrokeOpacity: 1,\n\tfill: \"#74b9ff\",\n};\n\nexport default BackgroundHover;\n"]}