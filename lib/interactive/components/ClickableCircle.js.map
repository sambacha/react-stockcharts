{"version":3,"sources":["../../../../src/lib/interactive/components/ClickableCircle.js"],"names":["ClickableCircle","props","saveNode","bind","renderSVG","drawOnCanvas","isHover","node","moreProps","mouseXY","r","helper","x","y","mx","my","hover","ctx","stroke","strokeWidth","fill","fillOpacity","strokeOpacity","lineWidth","fillStyle","strokeStyle","beginPath","arc","Math","PI","interactiveCursorClass","show","onDragStart","onDrag","onDragComplete","getMouseCanvas","Component","xyProvider","cx","cy","placement","width","height","degress","xScale","yScale","chartConfig","propTypes","PropTypes","func","isRequired","number","string","className","bool","defaultProps","noop","onMove"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;;;AACA;;AAEA;;;;;;;;;;IAEMA,e;;;AACL,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACZA,KADY;;AAElB,QAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,OAAhB;AACA,QAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeD,IAAf,OAAjB;AACA,QAAKE,YAAL,GAAoB,MAAKA,YAAL,CAAkBF,IAAlB,OAApB;AACA,QAAKG,OAAL,GAAe,MAAKA,OAAL,CAAaH,IAAb,OAAf;AALkB;AAMlB;;;;2BACQI,I,EAAM;AACd,QAAKA,IAAL,GAAYA,IAAZ;AACA;;;0BACOC,S,EAAW;AAAA,OACVC,OADU,GACED,SADF,CACVC,OADU;AAElB;;AACA,OAAMC,IAAI,KAAKT,KAAL,CAAWS,CAAX,GAAe,CAAzB;;AAHkB,iBAIHC,OAAO,KAAKV,KAAZ,EAAmBO,SAAnB,CAJG;AAAA;AAAA,OAIXI,CAJW;AAAA,OAIRC,CAJQ;;AAAA,iCAMDJ,OANC;AAAA,OAMXK,EANW;AAAA,OAMPC,EANO;;AAOlB,OAAMC,QAASJ,IAAIF,CAAL,GAAUI,EAAV,IAAgBA,KAAMF,IAAIF,CAA1B,IACTG,IAAIH,CAAL,GAAUK,EADA,IACMA,KAAMF,IAAIH,CAD9B;;AAGA;AACA,UAAOM,KAAP;AACA;;;+BACYC,G,EAAKT,S,EAAW;AAAA,gBACU,KAAKP,KADf;AAAA,OACpBiB,MADoB,UACpBA,MADoB;AAAA,OACZC,WADY,UACZA,WADY;AAAA,OACCC,IADD,UACCA,IADD;AAAA,iBAEW,KAAKnB,KAFhB;AAAA,OAEpBoB,WAFoB,WAEpBA,WAFoB;AAAA,OAEPC,aAFO,WAEPA,aAFO;AAAA,OAGpBZ,CAHoB,GAGd,KAAKT,KAHS,CAGpBS,CAHoB;;AAAA,kBAKbC,OAAO,KAAKV,KAAZ,EAAmBO,SAAnB,CALa;AAAA;AAAA,OAKrBI,CALqB;AAAA,OAKlBC,CALkB;;AAO5BI,OAAIM,SAAJ,GAAgBJ,WAAhB;AACAF,OAAIO,SAAJ,GAAgB,sBAAUJ,IAAV,EAAgBC,WAAhB,CAAhB;AACAJ,OAAIQ,WAAJ,GAAkB,sBAAUP,MAAV,EAAkBI,aAAlB,CAAlB;;AAEAL,OAAIS,SAAJ;AACAT,OAAIU,GAAJ,CAAQf,CAAR,EAAWC,CAAX,EAAcH,CAAd,EAAiB,CAAjB,EAAoB,IAAIkB,KAAKC,EAA7B,EAAiC,KAAjC;AACAZ,OAAIG,IAAJ;AACAH,OAAIC,MAAJ;AACA;;;4BACSV,S,EAAW;AAAA,iBACkB,KAAKP,KADvB;AAAA,OACZiB,MADY,WACZA,MADY;AAAA,OACJC,WADI,WACJA,WADI;AAAA,OACSC,IADT,WACSA,IADT;AAAA,iBAEmB,KAAKnB,KAFxB;AAAA,OAEZoB,WAFY,WAEZA,WAFY;AAAA,OAECC,aAFD,WAECA,aAFD;AAAA,OAGZZ,CAHY,GAGN,KAAKT,KAHC,CAGZS,CAHY;;AAAA,kBAKLC,OAAO,KAAKV,KAAZ,EAAmBO,SAAnB,CALK;AAAA;AAAA,OAKbI,CALa;AAAA,OAKVC,CALU;;AAOpB,UAAO,0CAAQ,IAAID,CAAZ,EAAe,IAAIC,CAAnB,EAAsB,GAAGH,CAAzB;AACN,iBAAaS,WADP;AAEN,YAAQD,MAFF;AAGN,mBAAeI,aAHT;AAIN,UAAMF,IAJA;AAKN,iBAAaC;AALP,KAAP;AAOA;;;2BACQ;AAAA,OACAS,sBADA,GAC2B,KAAK7B,KADhC,CACA6B,sBADA;AAAA,OAEAC,IAFA,GAES,KAAK9B,KAFd,CAEA8B,IAFA;AAAA,iBAGwC,KAAK9B,KAH7C;AAAA,OAGA+B,WAHA,WAGAA,WAHA;AAAA,OAGaC,MAHb,WAGaA,MAHb;AAAA,OAGqBC,cAHrB,WAGqBA,cAHrB;;;AAKR,UAAOH,OACJ,8BAAC,+BAAD,IAAuB,KAAK,KAAK7B,QAAjC;AACD,4BAAwB4B,sBADvB;AAED,kBAFC;AAGD,aAAS,KAAKxB,OAHb;;AAKD,iBAAa0B,WALZ;AAMD,YAAQC,MANP;AAOD,oBAAgBC,cAPf;;AASD,aAAS,KAAK9B,SATb;;AAWD,gBAAY,KAAKC,YAXhB;AAYD,kBAAc8B,gCAZb;;AAcD,YAAQ,CAAC,KAAD,EAAQ,WAAR,EAAqB,MAArB;AAdP,KADI,GAiBJ,IAjBH;AAkBA;;;;EA9E4BC,gB;;AAiF9B,SAASzB,MAAT,CAAgBV,KAAhB,EAAuBO,SAAvB,EAAkC;AAAA,KACzB6B,UADyB,GACiCpC,KADjC,CACzBoC,UADyB;AAAA,KACbC,EADa,GACiCrC,KADjC,CACbqC,EADa;AAAA,KACTC,EADS,GACiCtC,KADjC,CACTsC,EADS;AAAA,KACLC,SADK,GACiCvC,KADjC,CACLuC,SADK;AAAA,KACMC,KADN,GACiCxC,KADjC,CACMwC,KADN;AAAA,KACaC,MADb,GACiCzC,KADjC,CACayC,MADb;AAAA,KACqBC,OADrB,GACiC1C,KADjC,CACqB0C,OADrB;;;AAGjC,KAAI,sBAAUN,UAAV,CAAJ,EAA2B;AAC1B,SAAOA,WAAW7B,SAAX,CAAP;AACA;;AALgC,KAOzBoC,MAPyB,GAOWpC,SAPX,CAOzBoC,MAPyB;AAAA,KAOFC,MAPE,GAOWrC,SAPX,CAOjBsC,WAPiB,CAOFD,MAPE;;;AASjC,KAAIL,cAAc,KAAlB,EAAyB;AACxB,MAAM5B,KAAIgC,OAAON,EAAP,CAAV;AACA,MAAMzB,KAAIgC,OAAON,EAAP,IAAaG,SAAS,CAAtB,GAA0B,CAApC;;AAEA,SAAO,CAAC9B,EAAD,EAAIC,EAAJ,CAAP;AACA;;AAED,KAAI2B,cAAc,QAAlB,EAA4B;AAC3B,MAAM5B,MAAIgC,OAAON,EAAP,CAAV;AACA,MAAMzB,MAAIgC,OAAON,EAAP,IAAcG,SAAS,CAAvB,GAA2B,CAArC;;AAEA,SAAO,CAAC9B,GAAD,EAAIC,GAAJ,CAAP;AACA;;AAED,KAAMD,IAAIgC,OAAON,EAAP,CAAV;AACA,KAAMzB,IAAIgC,OAAON,EAAP,CAAV;AACA,QAAO,CAAC3B,CAAD,EAAIC,CAAJ,CAAP;AAEA;AACDb,gBAAgB+C,SAAhB,GAA4B;AAC3BV,aAAYW,oBAAUC,IADK;;AAG3BjB,cAAagB,oBAAUC,IAAV,CAAeC,UAHD;AAI3BjB,SAAQe,oBAAUC,IAAV,CAAeC,UAJI;AAK3BhB,iBAAgBc,oBAAUC,IAAV,CAAeC,UALJ;AAM3B/B,cAAa6B,oBAAUG,MAAV,CAAiBD,UANH;AAO3BhC,SAAQ8B,oBAAUI,MAAV,CAAiBF,UAPE;AAQ3B9B,OAAM4B,oBAAUI,MAAV,CAAiBF,UARI;AAS3BxC,IAAGsC,oBAAUG,MAAV,CAAiBD,UATO;;AAW3BZ,KAAIU,oBAAUG,MAXa;AAY3BZ,KAAIS,oBAAUG,MAZa;;AAc3BE,YAAWL,oBAAUI,MAAV,CAAiBF,UAdD;AAe3BnB,OAAMiB,oBAAUM,IAAV,CAAeJ,UAfM;AAgB3B5B,gBAAe0B,oBAAUG,MAAV,CAAiBD,UAhBL;AAiB3B7B,cAAa2B,oBAAUG,MAAV,CAAiBD,UAjBH;AAkB3BpB,yBAAwBkB,oBAAUI;AAlBP,CAA5B;;AAsBApD,gBAAgBuD,YAAhB,GAA+B;AAC9BF,YAAW,yCADmB;AAE9BrB,cAAawB,WAFiB;AAG9BvB,SAAQuB,WAHsB;AAI9BtB,iBAAgBsB,WAJc;AAK9BC,SAAQD,WALsB;AAM9BzB,OAAM,KANwB;AAO9BV,cAAa,CAPiB;AAQ9BC,gBAAe;AARe,CAA/B;;kBAWetB,e","file":"ClickableCircle.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { getMouseCanvas } from \"../../GenericComponent\";\n\nimport { isDefined, noop, hexToRGBA } from \"../../utils\";\n\nclass ClickableCircle extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.saveNode = this.saveNode.bind(this);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.isHover = this.isHover.bind(this);\n\t}\n\tsaveNode(node) {\n\t\tthis.node = node;\n\t}\n\tisHover(moreProps) {\n\t\tconst { mouseXY } = moreProps;\n\t\t// const { r } = this.props;\n\t\tconst r = this.props.r + 7;\n\t\tconst [x, y] = helper(this.props, moreProps);\n\n\t\tconst [mx, my] = mouseXY;\n\t\tconst hover = (x - r) < mx && mx < (x + r)\n\t\t\t&& (y - r) < my && my < (y + r);\n\n\t\t// console.log(\"hover->\", hover);\n\t\treturn hover;\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { stroke, strokeWidth, fill } = this.props;\n\t\tconst { fillOpacity, strokeOpacity } = this.props;\n\t\tconst { r } = this.props;\n\n\t\tconst [x, y] = helper(this.props, moreProps);\n\n\t\tctx.lineWidth = strokeWidth;\n\t\tctx.fillStyle = hexToRGBA(fill, fillOpacity);\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\n\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, r, 0, 2 * Math.PI, false);\n\t\tctx.fill();\n\t\tctx.stroke();\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { stroke, strokeWidth, fill } = this.props;\n\t\tconst { fillOpacity, strokeOpacity } = this.props;\n\t\tconst { r } = this.props;\n\n\t\tconst [x, y] = helper(this.props, moreProps);\n\n\t\treturn <circle cx={x} cy={y} r={r}\n\t\t\tstrokeWidth={strokeWidth}\n\t\t\tstroke={stroke}\n\t\t\tstrokeOpacity={strokeOpacity}\n\t\t\tfill={fill}\n\t\t\tfillOpacity={fillOpacity}\n\t\t/>;\n\t}\n\trender() {\n\t\tconst { interactiveCursorClass } = this.props;\n\t\tconst { show } = this.props;\n\t\tconst { onDragStart, onDrag, onDragComplete } = this.props;\n\n\t\treturn show\n\t\t\t? <GenericChartComponent ref={this.saveNode}\n\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\n\t\t\t\tselected\n\t\t\t\tisHover={this.isHover}\n\n\t\t\t\tonDragStart={onDragStart}\n\t\t\t\tonDrag={onDrag}\n\t\t\t\tonDragComplete={onDragComplete}\n\n\t\t\t\tsvgDraw={this.renderSVG}\n\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tcanvasToDraw={getMouseCanvas}\n\n\t\t\t\tdrawOn={[\"pan\", \"mousemove\", \"drag\"]}\n\t\t\t/>\n\t\t\t: null;\n\t}\n}\n\nfunction helper(props, moreProps) {\n\tconst { xyProvider, cx, cy, placement, width, height, degress } = props;\n\n\tif (isDefined(xyProvider)) {\n\t\treturn xyProvider(moreProps);\n\t}\n\n\tconst { xScale, chartConfig: { yScale } } = moreProps;\n\n\tif (placement === \"top\") {\n\t\tconst x = xScale(cx);\n\t\tconst y = yScale(cy) - height / 2 - 5;\n\n\t\treturn [x, y];\n\t}\n\n\tif (placement === \"bottom\") {\n\t\tconst x = xScale(cx);\n\t\tconst y = yScale(cy)  + height / 2 + 5;\n\n\t\treturn [x, y];\n\t}\n\n\tconst x = xScale(cx);\n\tconst y = yScale(cy);\n\treturn [x, y];\n\n}\nClickableCircle.propTypes = {\n\txyProvider: PropTypes.func,\n\n\tonDragStart: PropTypes.func.isRequired,\n\tonDrag: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n\tstrokeWidth: PropTypes.number.isRequired,\n\tstroke: PropTypes.string.isRequired,\n\tfill: PropTypes.string.isRequired,\n\tr: PropTypes.number.isRequired,\n\n\tcx: PropTypes.number,\n\tcy: PropTypes.number,\n\n\tclassName: PropTypes.string.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tstrokeOpacity: PropTypes.number.isRequired,\n\tfillOpacity: PropTypes.number.isRequired,\n\tinteractiveCursorClass: PropTypes.string,\n};\n\n\nClickableCircle.defaultProps = {\n\tclassName: \"react-stockcharts-interactive-line-edge\",\n\tonDragStart: noop,\n\tonDrag: noop,\n\tonDragComplete: noop,\n\tonMove: noop,\n\tshow: false,\n\tfillOpacity: 1,\n\tstrokeOpacity: 1,\n};\n\nexport default ClickableCircle;\n"]}