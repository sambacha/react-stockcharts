{"version":3,"sources":["../../../../src/lib/interactive/components/ClickableRect.js"],"names":["ClickableRect","props","saveNode","bind","renderSVG","drawOnCanvas","isHover","node","moreProps","mouseXY","r","helper","x","y","mx","my","hover","ctx","stroke","strokeWidth","fill","fillOpacity","strokeOpacity","lineWidth","fillStyle","strokeStyle","beginPath","rect","interactiveCursorClass","show","onDragStart","onDrag","onDragComplete","getMouseCanvas","Component","xyProvider","cx","cy","width","height","placement","xScale","yScale","chartConfig","propTypes","PropTypes","func","isRequired","number","string","className","bool","defaultProps","noop","onMove"],"mappings":"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","file":"ClickableRect.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { getMouseCanvas } from \"../../GenericComponent\";\n\nimport { isDefined, noop, hexToRGBA } from \"../../utils\";\n\nclass ClickableRect extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.saveNode = this.saveNode.bind(this);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.isHover = this.isHover.bind(this);\n\t}\n\tsaveNode(node) {\n\t\tthis.node = node;\n\t}\n\tisHover(moreProps) {\n\t\tconst { mouseXY } = moreProps;\n\t\t// const { r } = this.props;\n\t\tconst r = this.props.r + 7;\n\t\tconst [x, y] = helper(this.props, moreProps);\n\n\t\tconst [mx, my] = mouseXY;\n\t\tconst hover = x - r < mx && mx < x + r && y - r < my && my < y + r;\n\n\t\t// console.log(\"hover->\", hover);\n\t\treturn hover;\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { stroke, strokeWidth, fill } = this.props;\n\t\tconst { fillOpacity, strokeOpacity } = this.props;\n\t\tconst { r } = this.props;\n\n\t\tconst [x, y] = helper(this.props, moreProps);\n\n\t\tctx.lineWidth = strokeWidth;\n\t\tctx.fillStyle = hexToRGBA(fill, fillOpacity);\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\n\n\t\tctx.beginPath();\n\t\tctx.rect(x, y, 10, 10);\n\t\tctx.fill();\n\t\tctx.stroke();\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { stroke, strokeWidth, fill } = this.props;\n\t\tconst { fillOpacity, strokeOpacity } = this.props;\n\t\tconst { r } = this.props;\n\n\t\tconst [x, y] = helper(this.props, moreProps);\n\n\t\treturn (\n\t\t\t<rect\n\t\t\t\tx={x}\n\t\t\t\ty={y}\n\t\t\t\twidth={r}\n\t\t\t\theight={r}\n\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\tstroke={stroke}\n\t\t\t\tstrokeOpacity={strokeOpacity}\n\t\t\t\tfill={fill}\n\t\t\t\tfillOpacity={fillOpacity}\n\t\t\t/>\n\t\t);\n\t}\n\trender() {\n\t\tconst { interactiveCursorClass } = this.props;\n\t\tconst { show } = this.props;\n\t\tconst { onDragStart, onDrag, onDragComplete } = this.props;\n\n\t\treturn show ? (\n\t\t\t<GenericChartComponent\n\t\t\t\tref={this.saveNode}\n\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\n\t\t\t\tselected\n\t\t\t\tisHover={this.isHover}\n\t\t\t\tonDragStart={onDragStart}\n\t\t\t\tonDrag={onDrag}\n\t\t\t\tonDragComplete={onDragComplete}\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tcanvasToDraw={getMouseCanvas}\n\t\t\t\tdrawOn={[\"pan\", \"mousemove\", \"drag\"]}\n\t\t\t/>\n\t\t) : null;\n\t}\n}\n\nfunction helper(props, moreProps) {\n\tconst { xyProvider, cx, cy, width, height, placement } = props;\n\n\tif (isDefined(xyProvider)) {\n\t\treturn xyProvider(moreProps);\n\t}\n\n\tconst {\n\t\txScale,\n\t\tchartConfig: { yScale },\n\t} = moreProps;\n\n\tif (placement === \"left\") {\n\t\tconst x = xScale(cx) - width / 2 - 10;\n\t\tconst y = yScale(cy) - 5;\n\n\t\treturn [x, y];\n\t}\n\n\tif (placement === \"right\") {\n\t\tconst x = xScale(cx) + width / 2;\n\t\tconst y = yScale(cy) - 5;\n\n\t\treturn [x, y];\n\t}\n\n\tconst x = xScale(cx);\n\tconst y = yScale(cy);\n\n\treturn [x, y];\n}\nClickableRect.propTypes = {\n\txyProvider: PropTypes.func,\n\n\tonDragStart: PropTypes.func.isRequired,\n\tonDrag: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n\tstrokeWidth: PropTypes.number.isRequired,\n\tstroke: PropTypes.string.isRequired,\n\tfill: PropTypes.string.isRequired,\n\tr: PropTypes.number.isRequired,\n\n\tcx: PropTypes.number,\n\tcy: PropTypes.number,\n\n\tclassName: PropTypes.string.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tstrokeOpacity: PropTypes.number.isRequired,\n\tfillOpacity: PropTypes.number.isRequired,\n\tinteractiveCursorClass: PropTypes.string,\n};\n\nClickableRect.defaultProps = {\n\tclassName: \"react-stockcharts-interactive-line-edge\",\n\tonDragStart: noop,\n\tonDrag: noop,\n\tonDragComplete: noop,\n\tonMove: noop,\n\tshow: false,\n\tfillOpacity: 1,\n\tstrokeOpacity: 1,\n};\n\nexport default ClickableRect;\n"]}