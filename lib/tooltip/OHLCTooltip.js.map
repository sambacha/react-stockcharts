{"version":3,"sources":["../../../src/lib/tooltip/OHLCTooltip.js"],"names":["OHLCTooltip","props","renderSVG","bind","moreProps","displayValuesFor","xDisplayFormat","accessor","volumeFormat","ohlcFormat","percentFormat","displayTexts","onChange","visible","chartConfig","width","height","displayXAccessor","fullData","currentItem","yesterdayItem","displayDate","open","high","low","close","yesterdayClose","volume","percentChange","na","item","originProp","origin","x","y","itemsToDisplay","children","Component","propTypes","className","PropTypes","string","func","oneOfType","array","fontFamily","fontSize","number","onClick","textFill","labelFill","object","bool","displayTextsDefault","d","o","h","l","c","v","p","u","defaultProps","date","defaultDisplay","serverTime","dir","onUpdateServerTime","console","log","displayTextsRTL","getRTL","getLTR","renderTooltip"],"mappings":"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","file":"OHLCTooltip.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport displayValuesFor from \"./displayValuesFor\";\nimport getYesterdayDate from \"./getYesterdayDate\";\nimport GenericChartComponent from \"../GenericChartComponent\";\n\nimport { isDefined, functor } from \"../utils\";\nimport ToolTipText from \"./ToolTipText\";\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\nclass OHLCTooltip extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { displayValuesFor } = this.props;\n\t\tconst {\n\t\t\txDisplayFormat,\n\t\t\taccessor,\n\t\t\tvolumeFormat,\n\t\t\tohlcFormat,\n\t\t\tpercentFormat,\n\t\t\tdisplayTexts,\n\t\t\tonChange,\n\t\t\tvisible\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tchartConfig: { width, height },\n\t\t} = moreProps;\n\t\tconst { displayXAccessor, fullData } = moreProps;\n\n\t\tconst currentItem = displayValuesFor(this.props, moreProps);\n\t\tconst yesterdayItem = getYesterdayDate(fullData, currentItem);\n\n\t\tlet displayDate, open, high, low, close, yesterdayClose, volume, percentChange;\n\t\tdisplayDate = open = high = low = close = yesterdayClose = volume = percentChange =\n      displayTexts.na;\n\n\t\tif (isDefined(currentItem) && isDefined(accessor(currentItem))) {\n\t\t\tconst item = accessor(currentItem);\n\n\t\t\tvolume = isDefined(item.volume)\n\t\t\t\t? volumeFormat(item.volume)\n\t\t\t\t: displayTexts.na;\n\n\t\t\tdisplayDate = xDisplayFormat(displayXAccessor(item));\n\t\t\topen = ohlcFormat(item.open);\n\t\t\thigh = ohlcFormat(item.high);\n\t\t\tlow = ohlcFormat(item.low);\n\t\t\tclose = ohlcFormat(item.close);\n\t\t\tyesterdayClose = isDefined(yesterdayItem) ? ohlcFormat(yesterdayItem.close) : null;\n\t\t\tpercentChange = isDefined(yesterdayItem) ? percentFormat((item.close - yesterdayClose) / yesterdayClose) : \"n/a\";\n\n\t\t\tif (onChange) {\n\t\t\t\tonChange({ displayDate, open, high, low, close, volume, percentChange });\n\t\t\t}\n\t\t}\n\n\t\tconst { origin: originProp } = this.props;\n\t\tconst origin = functor(originProp);\n\t\tconst [x, y] = origin(width, height);\n\n\t\tconst itemsToDisplay = {\n\t\t\tdisplayDate,\n\t\t\topen,\n\t\t\thigh,\n\t\t\tlow,\n\t\t\tclose,\n\t\t\tpercentChange,\n\t\t\tvolume,\n\t\t\tx,\n\t\t\ty,\n\t\t};\n\n\t\treturn this.props.children(this.props, moreProps, itemsToDisplay);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GenericChartComponent\n\t\t\t\tclip={false}\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tdrawOn={[\"mousemove\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nOHLCTooltip.propTypes = {\n\tclassName: PropTypes.string,\n\taccessor: PropTypes.func,\n\txDisplayFormat: PropTypes.func,\n\tchildren: PropTypes.func,\n\tvolumeFormat: PropTypes.func,\n\tpercentFormat: PropTypes.func,\n\tohlcFormat: PropTypes.func,\n\torigin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tonClick: PropTypes.func,\n\tdisplayValuesFor: PropTypes.func,\n\ttextFill: PropTypes.string,\n\tlabelFill: PropTypes.string,\n\tdisplayTexts: PropTypes.object,\n\tonChange: PropTypes.func,\n\tvisible: PropTypes.bool,\n};\n\nconst displayTextsDefault = {\n\td: \"Date: \",\n\to: \" O: \",\n\th: \" H: \",\n\tl: \" L: \",\n\tc: \" C: \",\n\tv: \" Vol: \",\n\tp: \" P: \",\n\tna: \"n/a\",\n\tu: \"Last update: \"\n};\n\nOHLCTooltip.defaultProps = {\n\taccessor: (d) => {\n\t\treturn {\n\t\t\tdate: d.date,\n\t\t\topen: d.open,\n\t\t\thigh: d.high,\n\t\t\tlow: d.low,\n\t\t\tclose: d.close,\n\t\t\tvolume: d.volume,\n\t\t};\n\t},\n\txDisplayFormat: timeFormat(\"%Y-%m-%d\"),\n\tvolumeFormat: format(\".4s\"),\n\tpercentFormat: format(\".2%\"),\n\tohlcFormat: format(\".2f\"),\n\tdisplayValuesFor: displayValuesFor,\n\torigin: [0, 0],\n\tchildren: defaultDisplay,\n\tdisplayTexts: displayTextsDefault,\n};\n\nfunction defaultDisplay(props, moreProps, itemsToDisplay) {\n\t/* eslint-disable */\n  const {\n    className,\n    textFill,\n    labelFill,\n    onClick,\n    fontFamily,\n    fontSize,\n    visible,\n    serverTime = \"08:00\",\n    dir,\n    onUpdateServerTime = () => { console.log(\"onUpdateServerTime\") }\n  } = props;\n  /* eslint-enable */\n\n\tconst displayTextsRTL = {\n\t\td: \": Date\",\n\t\to: \": O\",\n\t\th: \": H\",\n\t\tl: \": L\",\n\t\tc: \": C\",\n\t\tv: \": Vol\",\n\t\tp: \": P\",\n\t\tna: \"n/a\",\n\t\tu: \": Last update\"\n\t};\n\n\tconst displayTexts = dir === \"rtl\" ? displayTextsRTL : props.displayTexts;\n\n\tconst {\n\t\tdisplayDate,\n\t\topen,\n\t\thigh,\n\t\tlow,\n\t\tclose,\n\t\tpercentChange,\n\t\tvolume,\n\t\tx,\n\t\ty,\n\t} = itemsToDisplay;\n\t// if (!visible) return null\n\n\tconst getRTL = () => {\n\t\treturn (\n\t\t\t<g\n\t\t\t\tclassName={`react-stockcharts-tooltip-hover ${className}`}\n\t\t\t\ttransform={`translate(${x + 60}, ${y + 8})`}\n\t\t\t\tonClick={onClick}\n\t\t\t\tfill=\"white\"\n\t\t\t>\n\t\t\t\t<image onClick={onUpdateServerTime} y=\"-10px\" href=\"./assets/cycle_arrow.png\" height=\"24\" width=\"24\"/>\n\t\t\t\t<ToolTipText\n\t\t\t\t\tx={0}\n\t\t\t\t\ty={0}\n\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\tfontSize={fontSize || 14}\n\t\t\t\t>\n\t\t\t\t\t<tspan key=\"value_U\" fill=\"white\" dy=\"6px\" x=\"30px\">{serverTime || \"\"}</tspan>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_U\" x=\"150px\">\n\t\t\t\t\t\t{serverTime ? displayTexts.u : \"\"}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_U_divider\" fill=\"#567E9C\" dx=\"15px\">|</tspan>\n\n\t\t\t\t\t<tspan key=\"value_P\" fill=\"white\" dx=\"30px\">{percentChange}</tspan>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_P\" x=\"330px\">\n\t\t\t\t\t\t{displayTexts.p}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_P_divider\" fill=\"#567E9C\" dx=\"15px\">|</tspan>\n\n\t\t\t\t\t<tspan key=\"value_Vol\" fill=\"white\" dx=\"30px\">{volume}</tspan>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_Vol\" x=\"450px\">\n\t\t\t\t\t\t{displayTexts.v}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_Vol_divider\" fill=\"#567E9C\" dx=\"15px\">|</tspan>\n\n\t\t\t\t\t<tspan key=\"value_C\" fill=\"white\" dx=\"30px\">{close}</tspan>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_C\" x=\"570px\">\n\t\t\t\t\t\t{displayTexts.c}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_C_divider\" fill=\"#567E9C\" dx=\"15px\">|</tspan>\n\n\t\t\t\t\t<tspan key=\"value_L\" fill=\"white\" dx=\"30px\">{low}</tspan>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_L\" x=\"685px\">\n\t\t\t\t\t\t{displayTexts.l}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_L_divider\" fill=\"#567E9C\" dx=\"15px\">|</tspan>\n\n\t\t\t\t\t<tspan key=\"value_H\" fill=\"white\" dx=\"30px\">{high}</tspan>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_H\" x=\"800px\">\n\t\t\t\t\t\t{displayTexts.h}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_H_divider\" fill=\"#567E9C\" dx=\"15px\">|</tspan>\n\n\t\t\t\t\t<tspan key=\"value_O\" fill=\"white\" dx=\"30px\">{open}</tspan>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_O\" x=\"915px\">\n\t\t\t\t\t\t{displayTexts.o}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_O_divider\" fill=\"#567E9C\" dx=\"15px\">|</tspan>\n\n\t\t\t\t\t<tspan key=\"value\" fill=\"white\" dx=\"30px\">{displayDate}</tspan>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label\" x=\"1060px\">\n\t\t\t\t\t\t{displayTexts.d}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_divider\" fill=\"#567E9C\" dx=\"15px\">|</tspan>\n\t\t\t\t</ToolTipText>\n\t\t\t</g>\n\t\t);\n\t};\n\n\tconst getLTR = () => {\n\t\treturn (\n\t\t\t<g\n\t\t\t\tclassName={`react-stockcharts-tooltip-hover ${className}`}\n\t\t\t\ttransform={`translate(${x + 60}, ${y + 8})`}\n\t\t\t\tonClick={onClick}\n\t\t\t\tfill=\"white\"\n\t\t\t>\n\t\t\t\t<image onClick={onUpdateServerTime} x=\"853px\" y=\"-10px\" href=\"./assets/cycle_arrow.png\" height=\"24\" width=\"24\"/>\n\t\t\t\t<ToolTipText\n\t\t\t\t\tx={0}\n\t\t\t\t\ty={0}\n\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\tfontSize={fontSize || 14}\n\t\t\t\t>\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label\" dy=\"6px\">\n\t\t\t\t\t\t{displayTexts.d}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value\" fill=\"white\">{displayDate}</tspan>\n\t\t\t\t\t<tspan key=\"value_divider\" fill=\"#567E9C\" x=\"123\">|</tspan>\n\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_O\" dx=\"34px\">\n\t\t\t\t\t\t{displayTexts.o}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_O\" fill=\"white\">{open}</tspan>\n\t\t\t\t\t<tspan key=\"value_O_divider\" fill=\"#567E9C\" x=\"236\">|</tspan>\n\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_H\" dx=\"34px\">\n\t\t\t\t\t\t{displayTexts.h}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_H\" fill=\"white\">{high}</tspan>\n\t\t\t\t\t<tspan key=\"value_H_divider\" fill=\"#567E9C\" x=\"352px\">|</tspan>\n\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_L\" dx=\"34px\">\n\t\t\t\t\t\t{displayTexts.l}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_L\" fill=\"white\">{low}</tspan>\n\t\t\t\t\t<tspan key=\"value_L_divider\" fill=\"#567E9C\" x=\"464px\">|</tspan>\n\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_C\" dx=\"34px\">\n\t\t\t\t\t\t{displayTexts.c}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_C\" fill=\"white\">{close}</tspan>\n\t\t\t\t\t<tspan key=\"value_C_divider\" fill=\"#567E9C\" x=\"579px\">|</tspan>\n\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_Vol\" dx=\"34px\">\n\t\t\t\t\t\t{displayTexts.v}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_Vol\" fill=\"white\">{volume}</tspan>\n\t\t\t\t\t<tspan key=\"value_Vol_divider\" fill=\"#567E9C\" x=\"704px\">|</tspan>\n\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_P\" dx=\"34px\">\n\t\t\t\t\t\t{displayTexts.p}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_P\" fill=\"white\">{percentChange}</tspan>\n\t\t\t\t\t<tspan key=\"value_P_divider\" fill=\"#567E9C\" x=\"818px\">|</tspan>\n\n\t\t\t\t\t<ToolTipTSpanLabel fill=\"white\" key=\"label_U\" dx=\"60px\">\n\t\t\t\t\t\t{serverTime ? displayTexts.u : \"\"}\n\t\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan key=\"value_U\" fill=\"white\">{serverTime || \"\"}</tspan>\n\t\t\t\t\t<tspan key=\"value_U_divider\" fill=\"#567E9C\" dx=\"12px\">{serverTime ? \"|\" : \"\"}</tspan>\n\t\t\t\t</ToolTipText>\n\t\t\t</g>\n\t\t);\n\t};\n\n\tconst renderTooltip = () => dir === \"rtl\" ? getRTL() : getLTR();\n\treturn (\n\t\t<g>\n\t\t\t<rect\n\t\t\t\tid=\"myGroup\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\theight=\"20px\"\n\t\t\t\tfill=\"black\"\n\t\t\t\ttransform={`translate(${x}, ${y})`}\n\t\t\t></rect>\n\t\t\t{renderTooltip()}\n\t\t</g>\n\t);\n}\n\nexport default OHLCTooltip;\n"]}